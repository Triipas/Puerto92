@model string
@* Partial View: Modal para Crear Categoría *@

<div id="createCategoriaModal" class="modal-overlay" style="display: none;">
    <div class="modal-container">
        <div class="modal-header">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="background: #0092B8; width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">
                    <i class="fa-solid fa-list"></i>
                </div>
                <div>
                    <h2 class="modal-title">Crear Nueva Categoría</h2>
                    <p class="modal-subtitle">Agregar una categoría para organizar productos o utensilios</p>
                </div>
            </div>
            <button class="modal-close" onclick="closeModal('createCategoriaModal')">&times;</button>
        </div>
        <form id="createCategoriaForm" asp-action="Create" asp-controller="Categorias" method="post">
            <div class="modal-body">
                <!-- Información del tipo actual -->
                <div style="background: #F0FDFA; border-left: 3px solid #14B8A6; padding: 0.875rem; border-radius: 4px; margin-bottom: 1.25rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; color: #0F766E; font-weight: 600; font-size: 13px; margin-bottom: 0.25rem;">
                        <i class="fa-solid fa-info-circle"></i>
                        <span>Creando categoría en: <strong id="tipoSeleccionadoLabel">@Model</strong></span>
                    </div>
                    <p style="font-size: 12px; color: #134E4A; margin: 0; margin-top: 0.25rem;">
                        Esta categoría se agregará a la lista de <strong>@Model</strong>. Puedes cambiar entre tipos usando las pestañas superiores.
                    </p>
                </div>

                <!-- Campo oculto para el tipo -->
                <input type="hidden" id="createTipo" name="Tipo" value="@Model" />

                <!-- Nombre de la Categoría -->
                <div class="form-group">
                    <label class="form-label">
                        Nombre de la Categoría <span style="color: red;">*</span>
                    </label>
                    <input type="text" 
                           name="Nombre" 
                           id="createNombre"
                           class="form-control" 
                           placeholder="Ej: Cervezas, Pescados, Cubiertos" 
                           required 
                           maxlength="100" />
                    <small style="color: #64748B; font-size: 12px; display: block; margin-top: 0.25rem;">
                        El nombre debe ser único dentro de este tipo de categoría
                    </small>
                </div>

                <!-- Orden de Visualización -->
                <div class="form-group">
                    <label class="form-label">
                        Orden de Visualización <span style="color: red;">*</span>
                    </label>
                    <input type="number" 
                           name="Orden" 
                           id="createOrden"
                           class="form-control" 
                           placeholder="1" 
                           min="1" 
                           max="999"
                           required />
                    <small style="color: #64748B; font-size: 12px; display: block; margin-top: 0.25rem;">
                        Número menor = aparece primero. Si no especificas, se asignará automáticamente al final.
                    </small>
                </div>

                <!-- Estado -->
                <div class="form-group">
                    <label class="form-label">Estado <span style="color: red;">*</span></label>
                    <select name="Activo" class="form-select">
                        <option value="true" selected>Activo</option>
                        <option value="false">Inactivo</option>
                    </select>
                </div>

                <!-- Ejemplos según tipo -->
                <div class="categoria-ejemplos" id="ejemplosContainer">
                    <!-- Se llenará dinámicamente según el tipo -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" onclick="closeModal('createCategoriaModal')">Cancelar</button>
                <button type="submit" class="btn btn-primary">
                    <i class="fa-solid fa-plus"></i>
                    Crear Categoría
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    // Ejemplos por tipo de categoría
    const ejemplosPorTipo = {
        'Bebidas': ['Cervezas', 'Vinos', 'Gaseosas', 'Jugos', 'Licores', 'Cócteles'],
        'Cocina': ['Pescados', 'Mariscos', 'Entradas', 'Platos de Fondo', 'Postres', 'Guarniciones'],
        'Utensilios': ['Cubiertos', 'Platos', 'Vasos', 'Copas', 'Manteles', 'Servilletas']
    };

    function actualizarEjemplos(tipo) {
        const container = document.getElementById('ejemplosContainer');
        const ejemplos = ejemplosPorTipo[tipo] || [];
        
        if (ejemplos.length > 0) {
            container.innerHTML = `
                <div style="background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 8px; padding: 0.875rem; margin-top: 0.5rem;">
                    <div style="font-size: 13px; font-weight: 600; color: #374151; margin-bottom: 0.5rem;">
                        <i class="fa-solid fa-lightbulb" style="color: #F59E0B; margin-right: 0.25rem;"></i>
                        Ejemplos de categorías en ${tipo}:
                    </div>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                        ${ejemplos.map(ej => `
                            <span style="background: white; border: 1px solid #D1D5DB; padding: 0.375rem 0.75rem; border-radius: 6px; font-size: 12px; color: #374151; cursor: pointer;"
                                  onclick="document.getElementById('createNombre').value = '${ej}'">
                                ${ej}
                            </span>
                        `).join('')}
                    </div>
                </div>
            `;
        } else {
            container.innerHTML = '';
        }
    }

    // Actualizar ejemplos al cargar el modal
    document.addEventListener('DOMContentLoaded', function() {
        const tipoActual = document.getElementById('createTipo')?.value || 'Bebidas';
        actualizarEjemplos(tipoActual);
    });
</script>