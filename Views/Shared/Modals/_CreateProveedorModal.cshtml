@* Modal para Crear Proveedor - CON CATEGORÍAS DINÁMICAS *@

<div id="createProveedorModal" class="modal-overlay" style="display: none;">
    <div class="modal-container">
        <div class="modal-header">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="background: #0092B8; width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">
                    <i class="fa-solid fa-truck-field"></i>
                </div>
                <div>
                    <h2 class="modal-title">Agregar Proveedor</h2>
                    <p class="modal-subtitle">Complete los datos para registrar un nuevo proveedor</p>
                </div>
            </div>
            <button class="modal-close" onclick="closeModal('createProveedorModal')">&times;</button>
        </div>
        <form id="createProveedorForm" asp-action="Create" asp-controller="Proveedores" method="post">
            <div class="modal-body">
                <!-- Información Importante RUC -->
                <div style="background: #EFF6FF; border: 1px solid #BFDBFE; border-radius: 8px; padding: 0.75rem; margin-bottom: 1rem; display: flex; gap: 0.5rem;">
                    <i class="fa-solid fa-info-circle" style="color: #3B82F6; margin-top: 2px;"></i>
                    <div>
                        <strong style="color: #1E40AF; font-size: 13px;">Validación RUC:</strong>
                        <span style="color: #1E40AF; font-size: 12px;"> El RUC debe ser válido y único en el sistema. Se validará el formato de 11 dígitos numéricos.</span>
                    </div>
                </div>

                <!-- RUC -->
                <div class="form-group">
                    <label class="form-label">RUC <span style="color: red;">*</span></label>
                    <input type="text" 
                           name="RUC" 
                           id="createRUC"
                           class="form-control" 
                           placeholder="Ej: 20123456789" 
                           required 
                           maxlength="11" 
                           pattern="\d{11}"
                           title="El RUC debe contener exactamente 11 dígitos numéricos" />
                    <small style="color: #64748B; font-size: 12px; display: block; margin-top: 0.25rem;">
                        11 dígitos numéricos - Se validará que no esté duplicado
                    </small>
                </div>

                <!-- Nombre o Razón Social -->
                <div class="form-group">
                    <label class="form-label">Nombre o Razón Social <span style="color: red;">*</span></label>
                    <input type="text" name="Nombre" class="form-control" placeholder="Ej: Pesquera del Pacífico S.A.C." required maxlength="200" />
                </div>

                <!-- Categoría y Teléfono -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label class="form-label">Categoría <span style="color: red;">*</span></label>
                        <select name="Categoria" id="createProveedorCategoria" class="form-select" required>
                            <option value="">Cargando categorías...</option>
                        </select>
                        <small style="color: #64748B; font-size: 12px; display: block; margin-top: 0.25rem;">
                            Categorías del sistema (Bebidas, Cocina, Utensilios)
                        </small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Teléfono <span style="color: red;">*</span></label>
                        <input type="text" name="Telefono" class="form-control" placeholder="Ej: 01-234-5678" required maxlength="20" />
                    </div>
                </div>

                <!-- Email y Persona de Contacto -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label class="form-label">Email (opcional)</label>
                        <input type="email" name="Email" class="form-control" placeholder="Ej: ventas@proveedor.com" maxlength="100" />
                    </div>

                    <div class="form-group">
                        <label class="form-label">Persona de Contacto (opcional)</label>
                        <input type="text" name="PersonaContacto" class="form-control" placeholder="Ej: Juan Pérez" maxlength="100" />
                    </div>
                </div>

                <!-- Dirección -->
                <div class="form-group">
                    <label class="form-label">Dirección (opcional)</label>
                    <textarea name="Direccion" class="form-control" rows="2" placeholder="Dirección completa del proveedor..." maxlength="300"></textarea>
                </div>

                <!-- Nuevo Proveedor Info -->
                <div style="background: #ECFDF5; border: 1px solid #A7F3D0; border-radius: 8px; padding: 0.75rem; margin-top: 1rem;">
                    <div style="display: flex; align-items: start; gap: 0.5rem;">
                        <i class="fa-solid fa-check-circle" style="color: #10B981; margin-top: 2px;"></i>
                        <span style="font-size: 12px; color: #047857;">
                            El proveedor estará disponible inmediatamente para ser utilizado en pedidos de todos los locales.
                        </span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" onclick="closeModal('createProveedorModal')">Cancelar</button>
                <button type="submit" class="btn btn-primary">
                    <i class="fa-solid fa-plus"></i>
                    Agregar Proveedor
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// Validar RUC en tiempo real
document.addEventListener('DOMContentLoaded', function() {
    const rucInput = document.getElementById('createRUC');
    
    if (rucInput) {
        rucInput.addEventListener('input', function() {
            // Solo permitir números
            this.value = this.value.replace(/[^\d]/g, '');
            
            // Limitar a 11 dígitos
            if (this.value.length > 11) {
                this.value = this.value.substring(0, 11);
            }
        });
    }
});
</script>