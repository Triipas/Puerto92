@* Modal para Reasignar Responsable *@

<div id="reasignarResponsableModal" class="modal-overlay" style="display: none;">
    <div class="modal-container" style="max-width: 520px;">
        <div class="modal-header" style="background: #FEF3C7; border-bottom: 1px solid #FDE68A;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="background: rgba(245, 158, 11, 0.1); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                    <i class="fa-solid fa-arrows-rotate" style="color: #F59E0B; font-size: 22px;"></i>
                </div>
                <div>
                    <h2 class="modal-title" style="color: #D97706;">Reasignar Responsable</h2>
                    <p class="modal-subtitle" style="color: #92400E;" id="reasignarSubtitulo">Vajilla - 2025-10-01</p>
                </div>
            </div>
            <button class="modal-close" onclick="closeModal('reasignarResponsableModal')" style="color: #D97706;">&times;</button>
        </div>
        <div class="modal-body">
            <input type="hidden" id="reasignarAsignacionId" />
            <input type="hidden" id="reasignarTipoKardex" />
            <input type="hidden" id="reasignarFecha" />
            <input type="hidden" id="reasignarEmpleadoActualId" />

            <!-- Responsable Actual -->
            <div style="background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 8px; padding: 1rem; margin-bottom: 1.25rem;">
                <h3 style="font-size: 14px; font-weight: 600; color: #6B7280; margin-bottom: 0.5rem;">Responsable actual</h3>
                <div style="font-size: 15px; color: #1F2937; font-weight: 600;" id="reasignarEmpleadoActual">Diego Castro</div>
            </div>

            <!-- Nuevo Responsable -->
            <div class="form-group">
                <label class="form-label">
                    Nuevo responsable <span style="color: #EF4444;">*</span>
                </label>
                <select id="reasignarNuevoEmpleadoId" class="form-select">
                    <option value="">Seleccione un empleado</option>
                </select>
            </div>

            <!-- Motivo (Opcional) -->
            <div class="form-group">
                <label class="form-label">
                    Motivo de la reasignación (opcional)
                </label>
                <textarea id="reasignarMotivo" 
                          class="form-control" 
                          rows="3" 
                          placeholder="Ej: Ausencia por enfermedad, cambio de turno, etc."
                          maxlength="500"></textarea>
                <small style="color: #64748B; font-size: 12px; display: block; margin-top: 0.375rem;">
                    Este motivo quedará registrado en el historial
                </small>
            </div>

            <!-- Advertencia si hay registro iniciado -->
            <div id="registroIniciadoWarning" style="display: none; background: #FEF3C7; border-left: 3px solid #F59E0B; padding: 1rem; border-radius: 6px; margin-top: 1rem;">
                <div style="font-size: 13px; color: #92400E;">
                    <strong style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <i class="fa-solid fa-triangle-exclamation"></i>
                        Registro iniciado:
                    </strong>
                    <p style="margin: 0; font-size: 12px; line-height: 1.6;">
                        El empleado original ya había iniciado el registro del kardex. Los datos parciales se mantendrán y el nuevo responsable podrá continuar donde se quedó.
                    </p>
                </div>
            </div>

            <!-- Información sobre la reasignación -->
            <div style="background: #DBEAFE; border-left: 3px solid #3B82F6; padding: 1rem; border-radius: 6px; margin-top: 1rem;">
                <div style="font-size: 13px; color: #1E40AF;">
                    <strong style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <i class="fa-solid fa-info-circle"></i>
                        Al reasignar:
                    </strong>
                    <ul style="list-style: none; padding-left: 1.5rem; margin: 0; font-size: 12px; line-height: 1.6;">
                        <li style="position: relative; margin-bottom: 0.25rem;">
                            <span style="position: absolute; left: -1rem;">•</span>
                            Se actualizará la asignación inmediatamente
                        </li>
                        <li style="position: relative; margin-bottom: 0.25rem;">
                            <span style="position: absolute; left: -1rem;">•</span>
                            Se registrará en el historial con fecha, hora y motivo
                        </li>
                        <li style="position: relative; margin-bottom: 0.25rem;">
                            <span style="position: absolute; left: -1rem;">•</span>
                            Se notificará al nuevo responsable inmediatamente
                        </li>
                        <li style="position: relative;">
                            <span style="position: absolute; left: -1rem;">•</span>
                            Se mostrará la hora límite de envío destacada
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="modal-footer" style="border-top: 1px solid #E5E7EB;">
            <button type="button" class="btn btn-cancel" onclick="closeModal('reasignarResponsableModal')">Cancelar</button>
            <button type="button" id="btnReasignar" class="btn" style="background: #F59E0B; color: white;" onclick="confirmarReasignacion()">
                <i class="fa-solid fa-arrows-rotate"></i>
                Reasignar
            </button>
        </div>
    </div>
</div>