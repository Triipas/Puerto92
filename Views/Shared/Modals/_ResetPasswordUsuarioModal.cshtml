@* Partial View: Modal para Resetear Contraseña de Usuario *@

<div id="resetPasswordModal" class="modal-overlay" style="display: none;">
    <div class="modal-container" style="max-width: 500px;">
        <div class="modal-header">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="background: #F59E0B; width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">
                    <i class="fa-solid fa-key"></i>
                </div>
                <div>
                    <h2 class="modal-title">Resetear Contraseña</h2>
                    <p class="modal-subtitle">Se generará una nueva contraseña temporal</p>
                </div>
            </div>
            <button class="modal-close" onclick="closeResetPasswordModal()">&times;</button>
        </div>
        <form id="resetPasswordForm" method="post">
            <input type="hidden" id="resetPasswordUserId" name="id" />
            <input type="hidden" id="resetPasswordTemp" name="tempPassword" />
            <div class="modal-body">
                <!-- Usuario Seleccionado -->
                <div style="background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 8px; padding: 1rem; margin-bottom: 1.25rem;">
                    <h3 style="font-size: 14px; font-weight: 600; color: #6B7280; margin-bottom: 0.75rem;">Usuario seleccionado:</h3>
                    <div style="font-size: 14px; color: #1F2937;">
                        <div style="margin-bottom: 0.25rem;">
                            <strong>Nombre:</strong> <span id="resetPasswordNombre">-</span>
                        </div>
                        <div style="margin-bottom: 0.25rem;">
                            <strong>Usuario:</strong> <span id="resetPasswordUsername">-</span>
                        </div>
                        <div>
                            <strong>Rol:</strong> <span id="resetPasswordRol">-</span>
                        </div>
                    </div>
                </div>

                <!-- Contraseña Temporal -->
                <div style="background: #EFF6FF; border: 2px solid #3B82F6; border-radius: 8px; padding: 1rem; margin-bottom: 1.25rem;">
                    <h3 style="font-size: 14px; font-weight: 600; color: #1E40AF; margin-bottom: 0.75rem;">Contraseña Temporal Generada:</h3>
                    <div style="display: flex; align-items: center; gap: 0.75rem; background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #BFDBFE;">
                        <code id="resetPasswordGenerated" style="flex: 1; font-size: 18px; font-weight: 700; color: #1E40AF; letter-spacing: 1px;">
                            Puerto92_XxXxXxX
                        </code>
                        <button type="button" onclick="copyPassword()" class="btn btn-sm" style="background: #3B82F6; color: white; padding: 0.5rem 0.75rem;" title="Copiar contraseña">
                            <i class="fa-solid fa-copy"></i>
                        </button>
                    </div>
                    <p style="font-size: 12px; color: #1E40AF; margin-top: 0.75rem; margin-bottom: 0;">
                        <i class="fa-solid fa-info-circle"></i>
                        Esta contraseña se mostrará solo en este momento. Cópiela o anótela para entregarla al usuario.
                    </p>
                </div>

                <!-- ¿Qué sucederá? -->
                <div style="background: #ECFDF5; border-left: 3px solid #10B981; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                    <h3 style="font-size: 14px; font-weight: 600; color: #047857; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fa-solid fa-circle-question"></i>
                        ¿Qué sucederá al confirmar?
                    </h3>
                    <ul style="list-style: none; padding-left: 0; margin: 0; font-size: 13px; color: #065F46;">
                        <li style="position: relative; padding-left: 1.5rem; margin-bottom: 0.5rem;">
                            <i class="fa-solid fa-arrow-right" style="position: absolute; left: 0; top: 2px; color: #10B981;"></i>
                            El usuario deberá forzar cambio en su próximo inicio de sesión
                        </li>
                        <li style="position: relative; padding-left: 1.5rem; margin-bottom: 0.5rem;">
                            <i class="fa-solid fa-arrow-right" style="position: absolute; left: 0; top: 2px; color: #10B981;"></i>
                            Esta acción se registrará en el sistema de auditoría
                        </li>
                        <li style="position: relative; padding-left: 1.5rem;">
                            <i class="fa-solid fa-arrow-right" style="position: absolute; left: 0; top: 2px; color: #10B981;"></i>
                            La contraseña anterior quedará invalidada de inmediato
                        </li>
                    </ul>
                </div>

                <!-- Advertencia -->
                <div style="background: #FEF3C7; border-left: 3px solid #F59E0B; padding: 0.875rem; border-radius: 4px;">
                    <p style="font-size: 13px; color: #92400E; margin: 0;">
                        <strong style="color: #78350F;">Importante:</strong> Asegúrese de entregar la contraseña temporal al usuario de forma segura y personal. No la comparta por medios inseguros como email o mensajes.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" onclick="closeResetPasswordModal()">Cancelar</button>
                <button type="submit" class="btn" style="background: #F59E0B; color: white;">
                    <i class="fa-solid fa-check"></i>
                    Confirmar Reseteo
                </button>
            </div>
        </form>
    </div>
</div>