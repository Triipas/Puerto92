@model Puerto92.ViewModels.ChangePasswordViewModel
@{
    ViewData["Title"] = "Cambiar Contraseña";
    Layout = null;
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Puerto 92</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="~/css/login.css" />
</head>
<body>
    <div class="login-page">
        <!-- Encabezado -->
        <div class="header-container">
            <div class="icon-circle" style="background-color: #F59E0B;">
                <i class="fa-solid fa-key"></i>
            </div>
            <h1 class="system-title">Cambio de Contraseña Obligatorio</h1>
            <p class="system-subtitle">Por seguridad, debes cambiar tu contraseña temporal</p>
        </div>

        <!-- Formulario -->
        <div class="form-card" style="max-width: 480px;">
            <div asp-validation-summary="ModelOnly" class="text-danger validation-summary"></div>

            <!-- Alerta Informativa - Primer Ingreso -->
            @if (ViewBag.EsPrimerIngreso == true)
            {
                <div style="background: #EFF6FF; border-left: 3px solid #3B82F6; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                    <div style="display: flex; gap: 0.5rem; align-items: start;">
                        <i class="fa-solid fa-info-circle" style="color: #3B82F6; margin-top: 2px;"></i>
                        <div style="font-size: 13px; color: #1E40AF;">
                            <strong>¡Bienvenido al sistema Puerto 92!</strong><br/>
                            Este es tu primer inicio de sesión. Por seguridad, debes crear tu propia contraseña personal antes de continuar.
                        </div>
                    </div>
                </div>
            }

            <!-- Alerta Informativa - Contraseña Reseteada -->
            @if (ViewBag.PasswordReseteada == true)
            {
                <div style="background: #FEF3C7; border-left: 3px solid #F59E0B; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                    <div style="display: flex; gap: 0.5rem; align-items: start;">
                        <i class="fa-solid fa-exclamation-triangle" style="color: #F59E0B; margin-top: 2px;"></i>
                        <div style="font-size: 13px; color: #78350F;">
                            <strong>Tu contraseña fue reseteada por un administrador.</strong><br/>
                            Por seguridad, debes crear una nueva contraseña personal antes de continuar.
                        </div>
                    </div>
                </div>
            }

            <form asp-action="ChangePassword" asp-controller="Account" method="post" class="login-form">
                <h2 class="form-title">Cambiar Contraseña</h2>
                <p class="form-subtitle">Crea una contraseña segura y personal</p>

                <!-- Contraseña Actual (Temporal) -->
                <div class="form-group">
                    <label asp-for="CurrentPassword">Contraseña Temporal</label>
                    <input asp-for="CurrentPassword" type="password" class="form-control" 
                           placeholder="Ingresa la contraseña que te dieron" 
                           autocomplete="current-password" />
                    <span asp-validation-for="CurrentPassword" class="text-danger"></span>
                </div>

                <!-- Nueva Contraseña -->
                <div class="form-group">
                    <label asp-for="NewPassword">Nueva Contraseña</label>
                    <input asp-for="NewPassword" type="password" class="form-control" 
                           placeholder="Mínimo 8 caracteres" 
                           autocomplete="new-password" />
                    <span asp-validation-for="NewPassword" class="text-danger"></span>
                    <small style="color: #64748B; font-size: 12px; display: block; margin-top: 0.25rem;">
                        Debe incluir mayúsculas, minúsculas y números
                    </small>
                </div>

                <!-- Confirmar Contraseña -->
                <div class="form-group">
                    <label asp-for="ConfirmPassword">Confirmar Nueva Contraseña</label>
                    <input asp-for="ConfirmPassword" type="password" class="form-control" 
                           placeholder="Vuelve a ingresar tu nueva contraseña" 
                           autocomplete="new-password" />
                    <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                </div>

                <!-- Requisitos de Seguridad -->
                <div style="background: #EFF6FF; border: 1px solid #BFDBFE; border-radius: 8px; padding: 0.75rem; margin-bottom: 1rem;">
                    <div style="font-size: 12px; color: #1E40AF;">
                        <strong>Requisitos de seguridad:</strong>
                        <ul style="margin: 0.5rem 0 0 1.25rem; padding: 0;">
                            <li>Mínimo 8 caracteres</li>
                            <li>Al menos una letra mayúscula</li>
                            <li>Al menos una letra minúscula</li>
                            <li>Al menos un número</li>
                        </ul>
                    </div>
                </div>

                <!-- Botón -->
                <button type="submit" class="btn-login" style="background: linear-gradient(90deg, #F59E0B, #D97706);">
                    <i class="fa-solid fa-check"></i>
                    Cambiar Contraseña y Continuar
                </button>

                <div class="login-footer">
                    <p>© 2025 Puerto 92 - Gestión Ágil S2</p>
                </div>
            </form>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
</body>
</html>